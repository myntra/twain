(function(e,t){typeof define=="function"?define(t):typeof module!="undefined"?module.exports=t():this[e]=t()})("Twain",function(){function n(t,n,r){if(t==null)return;if(e&&t.forEach===e)t.forEach(n,r);else if(t.length===+t.length){for(var i=0,s=t.length;i<s;i++)if(n.call(r,t[i],i,t)==={})return}else for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)&&n.call(r,t[o],o,t)==={})return}function r(e){return n(t.call(arguments,1),function(t){for(var n in t)e[n]=t[n]}),e}function i(e){return e!=null}function o(e){if(!(this instanceof o))return new o(e);e=e||{};var t=this;n(s,function(n,r){t[r]=i(e[r])?e[r]:n}),this.velocity=0}function u(e){if(!(this instanceof u))return new u(e);var t=this,n=t.step;r(t,{config:e,tweens:{},step:function(){n.apply(t,arguments)}})}var e=[].forEach,t=[].slice;var s={threshold:.2,multiplier:.15/16,acceleration:-0.0025,maxDisplacement:500,now:function(){return(new Date).getTime()}};r(o.prototype,{from:function(e){this._from=this._curr=e},to:function(e){i(this._from)||this.from(e),this._to=e},step:function(){this.time||(this.time=this.now());var e=this.now(),t=e-this.time,n=Math.min(this.multiplier*t,1),r=n*(this._to-this._curr),i=this._curr+r;Math.abs(this._to-i)<this.threshold?(r=this._to-this._curr,this._curr=i=this._to,n=1):this._curr=i,this.velocity=r/t,this.time=e;var s={time:this.time,period:t,fraction:n,delta:r,value:i};return this._update(s),s},_update:function(){},update:function(e){return e?(this._update=e,this):this.step()},reset:function(){return this.time=null,this},inertialTarget:function(e,t){var n=Math.min(Math.pow(this.velocity,2)/(-2*(e||this.acceleration)),t||this.maxDisplacement);return this._curr+n*(this.velocity>0?1:-1)}});return r(u.prototype,{$t:function(e,t){return this.tweens[e]||(this.tweens[e]=o(r({},this.config,t)))},from:function(e){var t=this;return n(e,function(e,n){t.$t(n).from(e)}),this},to:function(e){var t=this;return n(e,function(e,n){t.$t(n).to(e)}),this},current:function(){var e={};return n(this.tweens,function(t,n){e[n]=t._curr}),e},step:function(){var e={};return n(this.tweens,function(t,n){e[n]=t.step().value}),this._update(e),e},_update:function(){},update:function(e){return e?(this._update=e,this):this.step()},inertial:function(e){e=e||{};var t={};return n(this.tweens,function(n,r){t[r]=n.inertialTarget.apply(n,e[r])}),t}}),u.Tween=o,u})