(function(e,t){typeof define=="function"?define(t):typeof module!="undefined"?module.exports=t():this[e]=t()})("Twain",function(){function n(t,n,r){if(t==null)return;if(e&&t.forEach===e)t.forEach(n,r);else if(t.length===+t.length){for(var i=0,s=t.length;i<s;i++)if(n.call(r,t[i],i,t)==={})return}else for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)&&n.call(r,t[o],o,t)==={})return}function r(e,t){var r={};return n(e,function(e,n){r[n]=typeof t=="string"?e[t]:t(e,n)}),r}function i(e){return n(t.call(arguments,1),function(t){for(var n in t)e[n]=t[n]}),e}function s(e){return e!=null}function u(e){if(!(this instanceof u))return new u(e);e=e||{};var t=this;n(o,function(n,r){t[r]=s(e[r])?e[r]:n}),this.velocity=0}function a(e){if(!(this instanceof a))return new a(e);var t=this,n=t.step;i(t,{config:e,tweens:{},step:function(){n.apply(t,arguments)}})}var e=[].forEach,t=[].slice;var o={threshold:.2,multiplier:.15/16,acceleration:-0.0025,maxDisplacement:500,now:function(){return(new Date).getTime()}};i(u.prototype,{from:function(e){this._from=this.curr=e},to:function(e){s(this._from)||this.from(e),this._to=e},step:function(){this.time||(this.time=this.now());var e=this.now(),t=e-this.time,n=Math.min(this.multiplier*t,1),r=n*(this._to-this.curr),i=this.curr+r;Math.abs(this._to-i)<this.threshold?(r=this._to-this.curr,this.curr=i=this._to,n=1):this.curr=i,this.velocity=r/t,this.time=e;var s={time:this.time,period:t,fraction:n,delta:r,value:i};return this._update(s),s},_update:function(){},update:function(e){return e?(this._update=e,this):this.step()},reset:function(){return this.time=null,this},inertial:function(e,t){var n=Math.min(Math.pow(this.velocity,2)/(-2*(e||this.acceleration)),t||this.maxDisplacement);return this.curr+n*(this.velocity>0?1:-1)}});return i(a.prototype,{$t:function(e,t){return this.tweens[e]||(this.tweens[e]=u(i({},this.config,t)))},from:function(e){var t=this;return n(e,function(e,n){t.$t(n).from(e)}),this},to:function(e){var t=this;return n(e,function(e,n){t.$t(n).to(e)}),this},curr:function(){return r(this.tweens,"curr")},step:function(){var e=r(this.tweens,function(e){return e.step().value});return this._update(e),e},_update:function(){},update:function(e){return e?(this._update=e,this):this.step()},inertial:function(e){return e=e||{},r(this.tweens,function(t,n){return t.inertial.apply(t,e[n])})}}),a.Tween=u,a.util={isValue:s,extend:i,each:n,collect:r},a})